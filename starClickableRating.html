<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>5-Star Rating</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <style>
    .star-rating {
      font-size: 2rem;
      color: gray;
      cursor: pointer;
    }
    .star-rating .checked {
      color: gold;
    }
  </style>
</head>
<body style="text-align:center; margin-top: 50px;">

  <h2>Rate This</h2>
  <div id="rating" class="star-rating">
    <i class="fa fa-star" data-value="1"></i>
    <i class="fa fa-star" data-value="2"></i>
    <i class="fa fa-star" data-value="3"></i>
    <i class="fa fa-star" data-value="4"></i>
    <i class="fa fa-star" data-value="5"></i>
  </div>
  <p id="output"></p>
  <p id = "avg"></p>

  <script>
    let count = 0;
    let sum = 0;
    const stars = document.querySelectorAll('#rating .fa');
    console.log(stars);
    
    const output = document.getElementById('output');

    stars.forEach((star, index) => {
      star.addEventListener('click', () => {
        const rating = index + 1;
        output.textContent = `You rated this ${rating} star${rating > 1 ? 's' : ''}.`;

        sum += parseInt(rating);
        count++;
        document.getElementById('avg').innerHTML = (sum/count);

        stars.forEach((s, i) => {
          s.classList.toggle('checked', i < rating);
        });
      });
    });
  </script>

</body>
</html>
